<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine Week ‚ù§Ô∏è</title>

    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif}
        body{
            height:100vh;
            width: 100vw;
            overflow:hidden;
            color:#fff;
            background: #000; 
            transition: background 1.5s ease;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* LOCK SCREEN */
        #lock{
          position:fixed;inset:0;
          background:linear-gradient(135deg,#ff4e78,#ff1e56);
          display:flex;flex-direction:column;
          justify-content:center;align-items:center;
          z-index:9999;text-align:center;
          transition: opacity 0.8s ease, visibility 0.8s;
        }
        #lock.hidden { opacity: 0; visibility: hidden; }
        #lock h2{font-size:1.8rem; margin-bottom: 20px; padding: 0 10px;}
        #lock input{
            padding:15px; border:none; border-radius:30px; 
            width:80%; max-width: 300px; text-align:center; 
            font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            outline: none; -webkit-appearance: none;
        }
        #lock button{
            margin-top:20px; padding:12px 40px; border:none; 
            border-radius:30px; background:#fff; color:#ff2e63; 
            font-weight: bold; font-size: 1rem; cursor: pointer;
        }

        /* MAIN APP */
        .app{
          height:100%;
          display:flex;flex-direction:column;
          justify-content:center;align-items:center;
          text-align:center;padding:20px;
          animation:fadeUp 1.2s ease-out;
          position: relative; z-index: 10;
        }
        h1{font-size:2rem; margin-bottom: 5px; text-shadow: 0 0 15px rgba(255,255,255,0.4);}
        .message{font-size:1rem; line-height:1.4; max-width:90%; margin:10px 0; opacity: 0.9;}
        
        #imgContainer {
            width: 250px; height: 250px;
            margin: 15px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        #dayImg {
            width: 100%;
            height: 100%;
            object-fit: contain;
            animation: float 3s infinite ease-in-out;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        .btn-group { display: flex; flex-direction: column; gap: 12px; margin-top: 15px; width: 80%; max-width: 280px;}
        button.main-btn{
          background:rgba(255,255,255,0.9); color:#ff2e63;
          border:none; padding:12px 20px;
          border-radius:40px; font-size:1rem; font-weight: 600;
          box-shadow: 0 5px 15px rgba(0,0,0,0.2);
          cursor: pointer; -webkit-tap-highlight-color: transparent;
        }
        button.secondary-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.5);
            color: #fff; padding: 8px 15px; border-radius: 30px; font-size: 0.85rem;
        }

        /* MUSIC CONTROL */
        #musicToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            font-size: 20px;
        }

        /* DAY TESTER */
        #dayTester {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
            overflow-x: auto;
            width: 90%;
            padding: 10px;
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            backdrop-filter: blur(5px);
            z-index: 10002;
            scrollbar-width: none;
        }
        #dayTester::-webkit-scrollbar { display: none; }
        .test-btn {
            min-width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 0.8rem;
            flex-shrink: 0;
            cursor: pointer;
        }

        /* CHAT MODAL */
        .modal{
          position:fixed;inset:0;
          background:rgba(0,0,0,0.85);
          display:none;justify-content:center;align-items:center;
          z-index:10000; -webkit-backdrop-filter: blur(5px); backdrop-filter: blur(5px);
        }
        .modal-box{
          background: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%);
          width:90%; max-width:400px;
          border-radius:20px;
          padding:20px;
          max-height:75vh;
          display:flex;flex-direction:column;
        }
        .chat{overflow-y:auto; flex:1; margin-bottom: 15px; -webkit-overflow-scrolling: touch;}
        .bubble{
          padding:10px 14px; border-radius:18px;
          margin:8px 0; max-width:85%;
          font-size: 0.95rem; line-height: 1.3;
          animation: slideIn 0.3s ease-out;
        }
        .me{background:rgba(255,255,255,0.25); align-self: flex-start;}
        .you{background:#fff; color:#ff2e63; margin-left:auto; align-self: flex-end;}

        /* PARTICLES */
        .particle{
          position:fixed;
          top: -10%;
          animation: fallParticle 15s linear forwards;
          opacity: 0.6; pointer-events: none;
          z-index: 100;
        }

        /* ANIMATIONS */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes fallParticle {
            0% { transform: translateY(0vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(120vh) rotate(360deg); opacity: 0; }
        }

        /* RESPONSIVE FIXES */
        @media (max-height: 500px) {
            #imgContainer { width: 150px; height: 150px; }
            h1 { font-size: 1.5rem; }
            .message { font-size: 0.9rem; }
        }
    </style>
</head>

<body>

<!-- Background Music -->
<audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<button id="musicToggle" onclick="toggleMusic()">üéµ</button>

<!--<div id="dayTester">-->
<!--    <button class="test-btn" onclick="testDay(7)">7</button>-->
<!--    <button class="test-btn" onclick="testDay(8)">8</button>-->
<!--    <button class="test-btn" onclick="testDay(9)">9</button>-->
<!--    <button class="test-btn" onclick="testDay(10)">10</button>-->
<!--    <button class="test-btn" onclick="testDay(11)">11</button>-->
<!--    <button class="test-btn" onclick="testDay(12)">12</button>-->
<!--    <button class="test-btn" onclick="testDay(13)">13</button>-->
<!--    <button class="test-btn" onclick="testDay(14)">14</button>-->
<!--</div>-->

<div id="lock">
    <h2>üîê A Little Surprise ‚ù§Ô∏è</h2>
    <input type="password" id="pass" placeholder="Secret word..." autocomplete="off">
    <button onclick="unlock()">Unlock Surprise</button>
</div>

<div class="app">
    <h1 id="title">Happy Day!</h1>
    <p class="message" id="wish"></p>
    <div id="imgContainer">
        <img id="dayImg" src="" alt="Valentine Day Image">
    </div>
    <div class="btn-group">
        <button class="main-btn" onclick="openChat()">üí¨ Click Here</button>
    </div>
</div>

<div class="modal" id="chatModal">
    <div class="modal-box">
        <h3 id="chatTitle" style="text-align: center; margin-bottom: 10px;">üíñ Story üíñ</h3>
        <div class="chat" id="chat"></div>
        <button class="main-btn" style="width: 100%;" onclick="closeChat()">Close</button>
    </div>
</div>

<script>
    const PASSWORD = "143";
    let day = new Date().getDate();
    const bgMusic = document.getElementById('bgMusic');
    let isMusicPlaying = false;
    let particleInterval;

    const data = {
        7: { title: "Happy Rose Day", bg: "linear-gradient(135deg, #ff5f8f, #ff1e56)", wish: "May your life bloom like a beautiful rose.", particle: "üåπ", img: "rose.png", music: "rose.mp3", chat: [["me", "Happy Rose Day! üåπ"], ["you", "Thank you!"], ["me", "I picked the perfect one for you."], ["you", "Why this one?"], ["me", "It reminded me of your beauty."], ["you", "So sweet."], ["me", "Hope your life is always colorful."], ["you", "With you by my side."], ["me", "Always."], ["you", "‚ù§Ô∏èüåπ"]] },
        8: { title: "Happy Propose Day", bg: "linear-gradient(135deg, #6a11cb, #2575fc)", wish: "Will you stay by my side forever?", particle: "üíç", img: "propose.png", music: "promise.mp3", chat: [["me", "I have something to say."], ["you", "Yes?"], ["me", "Our journey has been amazing."], ["you", "It has."], ["me", "You make everything better."], ["you", "You too."], ["me", "So..."], ["you", "Yes?"], ["me", "Will you be my Valentine forever?"], ["you", "Yes! üíç‚ù§Ô∏è"]] },
        9: { title: "Happy Chocolate Day", bg: "linear-gradient(135deg, #6d4c41, #3e2723)", wish: "Life is sweeter because I have you.", particle: "üç´", img: "chocolate.png", rose: "rose.mp3", chat: [["me", "Happy Chocolate Day! üç´"], ["you", "Yay!"], ["me", "Got your favorites."], ["you", "You remembered!"], ["me", "Of course."], ["you", "They look yummy."], ["me", "Just like you üòâ"], ["you", "Haha!"], ["me", "Life is sweet with you."], ["you", "And chocolate! üòãüç´"]] },
        10: { title: "Happy Teddy Day", bg: "linear-gradient(135deg, #ff9a9e, #fad0c4)", wish: "Sending you a big warm teddy hug.", particle: "üß∏", img: "teddy.png", music: "hug.mp3", chat: [["me", "A fluffy friend for you! üß∏"], ["you", "So cute!"], ["me", "For hugs when I'm away."], ["you", "I'll name him Tiny."], ["me", "Perfect."], ["you", "Like your hugs."], ["me", "Keep him close."], ["you", "I will."], ["me", "Happy Teddy Day."], ["you", "üß∏‚ù§Ô∏è"]] },
        11: { title: "Happy Promise Day", bg: "linear-gradient(135deg, #a1c4fd, #c2e9fb)", wish: "I promise to hold your hand forever.", particle: "‚ú®", img: "promise.png", music: "promise.mp3", chat: [["me", "It's Promise Day."], ["you", "What's the promise?"], ["me", "To always listen."], ["you", "To support your dreams."], ["me", "To be your strength."], ["you", "To keep you laughing."], ["me", "To never let go."], ["you", "To love you more."], ["me", "Forever."], ["you", "ü§ù‚ù§Ô∏è‚ú®"]] },
        12: { title: "Happy Hug Day", bg: "linear-gradient(135deg, #f093fb, #f5576c)", wish: "A hug makes everything feel right.", particle: "ü´Ç", img: "hug.png", music: "hug.mp3", chat: [["me", "Can I get a hug?"], ["you", "Of course! ü§ó"], ["me", "Best place to be."], ["you", "Safe and warm."], ["me", "Feels so right."], ["you", "No words needed."], ["me", "Just our hearts."], ["you", "Stay like this?"], ["me", "Forever. Happy Hug Day."], ["you", "ü§ó‚ù§Ô∏è"]] },
        13: { title: "Happy Kiss Day", bg: "linear-gradient(135deg, #ff0844, #ffb199)", wish: "Kisses are the language of the soul.", particle: "‚ù§Ô∏è", img: "kiss.png", music: "rose.mp3", chat: [["me", "Happy Kiss Day! üíã"], ["you", "üíã‚ù§Ô∏è"], ["me", "A kiss for love."], ["you", "A kiss for us."], ["me", "Magic lips."], ["you", "Blushing!"], ["me", "All day long."], ["you", "Yes please."], ["me", "Savoring this."], ["you", "üíã‚ú®"]] },
        14: { title: "Happy Valentine's Day", bg: "linear-gradient(135deg, #c31432, #240b36)", wish: "Happy Valentine's Day!", particle: "üíù", img: "valentine.png", music: "valentine.mp3", chat: [["me", "The big day! ‚ù§Ô∏è"], ["you", "Happy Valentine's!"], ["me", "You look stunning."], ["you", "And you handsome."], ["me", "A whole day for us."], ["you", "Can't wait."], ["me", "Only us."], ["you", "Thanks for being mine."], ["me", "Thanks for choosing me."], ["you", "love you."], ["me", "Love you too. ‚ù§Ô∏è"]] }
    };

    let currentDay = data[day] || data[14];

    function initApp() {
        document.body.style.background = currentDay.bg;
        document.getElementById('title').innerText = currentDay.title;
        document.getElementById('wish').innerText = currentDay.wish;
        document.getElementById('dayImg').src = currentDay.img;
        
        // Update music source
        bgMusic.src = currentDay.music || "rose.mp3";
        if (isMusicPlaying) {
            bgMusic.play().catch(e => console.log("Music play blocked", e));
        }

        document.getElementById('dayImg').onerror = function() {
            this.src = "https://www.pngplay.com/wp-content/uploads/1/Valentine-Heart-PNG-Clipart-Background.png";
        };
    }

    function testDay(d) {
        day = d;
        currentDay = data[day];
        initApp();
        if (particleInterval) {
            clearInterval(particleInterval);
            startParticles();
        }
    }

    function toggleMusic() {
        if (isMusicPlaying) {
            bgMusic.pause();
            document.getElementById('musicToggle').innerText = "üîá";
        } else {
            bgMusic.play().catch(e => console.log("Music play blocked", e));
            document.getElementById('musicToggle').innerText = "üéµ";
        }
        isMusicPlaying = !isMusicPlaying;
    }

    function unlock() {
        if (document.getElementById('pass').value === PASSWORD) {
            document.getElementById('lock').classList.add('hidden');
            if (window.Android) Android.triggerNotification(currentDay.title, "Happy Valentine Week! ‚ù§Ô∏è");
            
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                document.getElementById('musicToggle').innerText = "üéµ";
            }).catch(e => console.log("Audio play failed", e));
            
            startParticles();
        } else alert("Try from heart ‚ù§Ô∏è");
    }

    function openChat() {
        const chatBox = document.getElementById('chat');
        chatBox.innerHTML = "";
        document.getElementById('chatModal').style.display = "flex";
        currentDay.chat.forEach((msg, i) => {
            setTimeout(() => {
                const b = document.createElement("div");
                b.className = `bubble ${msg[0]}`;
                b.innerText = msg[1];
                chatBox.appendChild(b);
                chatBox.scrollTop = chatBox.scrollHeight;
            }, i * 800);
        });
    }

    function closeChat() { document.getElementById('chatModal').style.display = "none"; }

    function notifyMe() {
        if (window.Android) Android.triggerNotification("Memory", "You are special! ‚ù§Ô∏è");
        else alert("Notification Triggered!");
    }

    function startParticles() {
        if (particleInterval) clearInterval(particleInterval);
        particleInterval = setInterval(() => {
            const p = document.createElement("div");
            p.className = "particle";
            p.innerText = Math.random() > 0.5 ? currentDay.particle : "‚ù§Ô∏è";
            p.style.left = Math.random() * 100 + "vw";
            p.style.fontSize = (Math.random() * 20 + 20) + "px";
            p.style.animationDuration = (Math.random() * 5 + 10) + "s";
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 15000);
        }, 800);
    }

    initApp();
</script>
</body>
</html>
